import"./constants-DgoLmzql.js";import{a as f,c,d as l}from"./viewUtil-DCbZMcCo.js";import{D as n,d as i}from"./DatabaseType-Ctki5lK6.js";function y(r){return r==null?!0:typeof r=="string"?["","NULL","undefined"].includes(r.toUpperCase()):!1}function o(r,e){if(a(r)&&typeof e=="string"){if(/boolean/i.test(r)){if(/^true$/i.test(e))return!0;if(/^false$/i.test(e))return!1}const t=/float|double|decimal/i.test(r)?parseFloat(e):parseInt(e);if(t!=null&&!isNaN(t))return t}return null}function m(r){return typeof r!="string"?r:r.replace(/ /g," ")}function B(r){return typeof r!="string"?r:r.replace(/(^'|'$)/g,"")}class S{isSupport(e){return f(e)}convert(e,t,s){if(t.startsWith("0x")){const u=t.slice(2);switch(s){case n.PG:return`'\\x${u}'`;case n.REDSHIFT:return`from_hex('${u}')`;case n.libSQL:case n.SQLITE:case n.DUCK_DB:return`x'${u}'`;case n.SNOWFLAKE:return`TO_BINARY('${u}', 'hex')`}return t}else switch(s){case n.DB2:return`CAST('${t}' AS BLOB)`;case n.SQLServer:return`CAST('${t}' AS varbinary)`;case n.ORACLE:return`rawtohex('${t}')`;case n.CASSANDRA:return`textAsBlob('${t}')`}}}class A{isSupport(e){return e.match(/DATE/i)!=null}convert(e,t,s){switch(s){case n.TRINO:return`from_iso8601_timestamp('${t}')`;case n.ORACLE:return`TO_DATE('${t}','yyyy/mm/dd hh24:mi:ss')`}}}class T{isSupport(e,t,s){return s==n.ORACLE&&e.match(/TIMESTAMP/i)!=null}convert(e,t,s){return`TO_TIMESTAMP('${t}','yyyy/mm/dd hh24:mi:ss')`}}class p{isSupport(e,t,s){return[n.ES,n.MONGO_DB].includes(s)}convert(e,t,s){return o(e,t)??t}}class C{isSupport(e,t,s){return!0}convert(e,t,s){typeof t=="string"&&(t=t.replace(/'/g,"''"));const u=`'${t}'`;return i(s)?u.replace(/\\/g,"\\\\"):u}}class E{isSupport(e,t,s){return a(e)}convert(e,t,s){return o(e,t)}}class N{isSupport(e){return!0}convert(e,t,s){switch(s){case n.CASSANDRA:if(e!=null&&e.match(/uuid/i))return t;break;case n.PG:case n.REDSHIFT:if(t.includes("nextval("))return t;break;case n.SQLServer:if(c(e))return`N'${t}'`;break;case n.TRINO:if(e!=null&&e.match(/json/i))return`json_parse('${t.replace(/'/g,"''").replace(/ /g," ").replace(/\\/g,"\\\\")}')`;break}}}class D{isSupport(e,t,s){return i(s)&&l(e)}convert(e,t,s){if(t.match(/\w+\(/))return`ST_GeomFromText('${t}')`}}const $=[new p,new E,new S,new A,new T,new D,new N,new C];function b(r,e,t){r||(r=""),e=`${e}`;for(const s of $)if(s.isSupport(r,e,t)){const u=s.convert(r,e,t);if(u!=null)return u}}var R=(r=>(r.True="true",r.False="false",r.Never="never",r.Always="always",r.Auto="auto",r))(R||{});function _(r){return r==null?void 0:r.replace(/^[`"\[](.+?)[`"\]]$/,"$1")}function I(r,e,t=!0){if(r==null||["MongoDB"].includes(e)||t=="never"||(t==!0&&(t="always"),t==!1&&(t="auto"),e==n.JDBC&&t=="auto"))return r;const s=r.match(/[A-Z]/g)&&![n.SNOWFLAKE,n.ORACLE,n.DM,n.DB2,n.AS400].includes(e),u=/[~!@#$%^&*()/\s\|,.<>?"'();:+\-=\[\]{}]/;return s||r.match(u)||t=="always"||r.match(/^(user|IF|KEY|DESC|LENGTH|GROUP|GROUPS|ORDER|TABLE|FROM|JOIN|INDEX|CONDITION|SYSTEM|TABLE|TYPE|VALUE|BACKUP|BEGIN|ACCOUNT|ACTION|ALL|ANY|CURRENT|DATA|GRANT|character|explain|union|REGEXP|source|primary|date|condition)$/i)?(r=_(r),[n.MYSQL,n.MARIA_DB,n.DORIS,n.NEO4J,n.BIG_QUERY].includes(e)?`\`${r}\``:`"${r}"`):r}function O(r,e,t){if(e==null||e===""&&!c(r))return"null";typeof e=="object"&&(e!=null&&e.origin)&&(e=e.origin),e=m(e);const s=b(r,e,t);if(s!=null)return s}function d(r,e){return a(e)?r:`'${r}'`}function a(r){if(!r||typeof r=="number"||r.includes("[]")||r=="interval")return!1;const e=["int","number","numeric","serial","float","double","decimal","real","bit","bool","boolean"];return!r.match(/point/i)&&r.match(new RegExp(e.join("|"),"i"))!=null}export{R as E,B as a,I as b,y as c,d as g,a as i,m as t,O as w};
