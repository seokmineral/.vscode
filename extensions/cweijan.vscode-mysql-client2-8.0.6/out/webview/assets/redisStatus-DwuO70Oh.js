import{a as V,r as m,D as K,e as g,M,v,ag as R,f as w,g as s,j as t,I as r,J as A,o as D,K as c,t as l,O as U,P as L,B as N}from"./app-D9mk4nci.js";import{E as O}from"./index-ZQ1VMzr2.js";import{a as P,E as j}from"./index-CF2IJHmI.js";import{E as W}from"./index-CApFEd1J.js";import"./index-vbuHYzPE.js";import"./_baseIteratee-BHgRsBqw.js";import"./isEqual-ClA7P-IQ.js";import"./merge-DhMwWPEb.js";import"./_initCloneObject-Du8bK4lp.js";import"./isArrayLikeObject-iUnBYB8T.js";import"./index-D84rhHTp.js";const d=p=>(U("data-v-a1f479db"),p=p(),L(),p),J={id:"app",class:"redis-status-container"},q={class:"mt-3 px-3"},z=d(()=>s("i",{class:"el-icon-refresh"},null,-1)),F={class:"grid grid-cols-3 gap-4 mt-4 px-3"},G={class:"col-span-1"},H={class:"box-card p-3 bg-secondBg mb-3"},Q=d(()=>s("span",{class:"text-base mb-2 block"},"Server",-1)),X={class:"server-status-tag-p"},Y={class:"server-status-text"},Z={class:"server-status-tag-p"},$=["title"],ss={class:"server-status-tag-p"},ts={class:"server-status-text"},es={class:"col-span-1"},os={class:"box-card p-3 bg-secondBg mb-3"},as=d(()=>s("span",{class:"text-base mb-2 block"}," Memory",-1)),ns={class:"server-status-tag-p"},rs={class:"server-status-text"},cs={class:"server-status-tag-p"},ls={class:"server-status-text"},is={class:"server-status-tag-p"},_s={class:"server-status-text"},ds={class:"col-span-1"},ps={class:"box-card p-3 bg-secondBg mb-3"},us=d(()=>s("span",{class:"text-base mb-2 block"},"Stats",-1)),ms={class:"server-status-tag-p"},vs={class:"server-status-text"},hs={class:"server-status-tag-p"},fs={class:"server-status-text"},bs={class:"server-status-tag-p"},gs={class:"server-status-text"},xs={class:"mt-4 px-3"},ys={class:"box-card p-3 bg-secondBg mb-3"},ks=d(()=>s("span",{class:"text-base mb-2 block"},"Key Statistics",-1)),Ss={class:"mt-4 px-3"},Bs={class:"box-card p-3 bg-secondBg mb-3"},Is=d(()=>s("span",{class:"text-base mb-2 block"}," All Redis Info",-1)),Es=V({__name:"redisStatus",setup(p){const u=m(!1),h=m(null),x=m(2e3),n=K({}),y=g(()=>{const e=[];for(const o in n)if(o.startsWith("db")){const i=n[o].split(",");e.push({db:o,keys:i[0].split("=")[1],expires:i[1].split("=")[1],avg_ttl:i[2].split("=")[1]})}return e}),k=g(()=>{const e=[];for(const o in n)e.push({key:o,value:n[o]});return e});M(()=>{f(),v.on("info",e=>{E(e)}),v.emit("init")}),R(()=>{clearInterval(h.value)});const f=()=>{h.value=setInterval(()=>{u.value&&v.emit("init")},x.value)},S=(e,o)=>e.keys-o.keys,B=(e,o)=>e.expires-o.expires,I=(e,o)=>e.avg_ttl-o.avg_ttl,E=e=>{if(!e)return{};e=e.split(`
`);const o={};for(let a of e){if(a=a.replace(/\s/gi,""),a.startsWith("#")||!a)continue;const i=a.split(":");o[i[0]]=i[1]}Object.assign(n,o)};return(e,o)=>{const a=O,i=W,T=A("vsc-tooltip"),_=j,b=P;return D(),w("div",J,[s("div",q,[t(a,{type:"info",class:"mr-2"},{default:r(()=>[z,c(" Auto Refresh ")]),_:1}),t(T,{title:"Auto Refresh Switch, Refresh Every 2 Seconds"},{default:r(()=>[t(i,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=C=>u.value=C),onChange:f},null,8,["modelValue"])]),_:1})]),s("div",F,[s("div",G,[s("div",H,[Q,s("p",X,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Redis Version: "),s("span",Y,l(n.redis_version),1)]),_:1})]),s("p",Z,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" OS: "),s("span",{class:"server-status-text",title:n.os},l(n.os),9,$)]),_:1})]),s("p",ss,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Process ID: "),s("span",ts,l(n.process_id),1)]),_:1})])])]),s("div",es,[s("div",os,[as,s("p",ns,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Used Memory: "),s("span",rs,l(n.used_memory_human),1)]),_:1})]),s("p",cs,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Used Memory Peak: "),s("span",ls,l(n.used_memory_peak_human),1)]),_:1})]),s("p",is,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Used Memory Lua: "),s("span",_s,l(Math.round(n.used_memory_lua/1024))+"K",1)]),_:1})])])]),s("div",ds,[s("div",ps,[us,s("p",ms,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Connected Clients: "),s("span",vs,l(n.connected_clients),1)]),_:1})]),s("p",hs,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Total Connections: "),s("span",fs,l(n.total_connections_received),1)]),_:1})]),s("p",bs,[t(a,{class:"server-status-container",type:"info"},{default:r(()=>[c(" Total Commands: "),s("span",gs,l(n.total_commands_processed),1)]),_:1})])])])]),s("div",xs,[s("div",ys,[ks,t(b,{data:y.value},{default:r(()=>[t(_,{prop:"db",label:"DB"}),t(_,{sortable:"",prop:"keys",label:"Keys","sort-method":S}),t(_,{sortable:"",prop:"expires",label:"Expires","sort-method":B}),t(_,{sortable:"",prop:"avg_ttl",label:"Avg TTL","sort-method":I})]),_:1},8,["data"])])]),s("div",Ss,[s("div",Bs,[Is,t(b,{data:k.value},{default:r(()=>[t(_,{prop:"key",label:"Key"}),t(_,{prop:"value",label:"Value"})]),_:1},8,["data"])])])])}}}),Ns=N(Es,[["__scopeId","data-v-a1f479db"]]);export{Ns as default};
