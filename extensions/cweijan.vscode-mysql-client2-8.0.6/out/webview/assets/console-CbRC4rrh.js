import{a as L,o as g,f as S,g as i,a7 as Y,n as Z,B as U,x as D,r as b,v,at as A,J as P,H as x,I as o,t,j as e,K as a,h as V,M as H,s as I,N as T,k as Q,au as ee,e as oe,F as q,A as M,$ as E}from"./app-D9mk4nci.js";import{E as G}from"./index-Bz3rwA2L.js";import{E as te}from"./index-CApFEd1J.js";import{E as ne,a as le}from"./index-D3kuO47r.js";import{E as se}from"./index-D84rhHTp.js";import"./index-vbuHYzPE.js";import"./index-ZQ1VMzr2.js";import"./isEqual-ClA7P-IQ.js";import"./index-BacoOGxV.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-BHgRsBqw.js";import"./castArray-Dg_NPWUQ.js";const ie={class:"card"},ae=L({__name:"Card",props:{full:Boolean},setup(O){return(u,p)=>(g(),S("div",{class:Z(["card-container",{"card-container-full":O.full}])},[i("div",ie,[Y(u.$slots,"default",{},void 0,!0)])],2))}}),K=U(ae,[["__scopeId","data-v-798fd364"]]),re={style:{"min-width":"300px"}},ce={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},ue={class:"mt-4 mb-2"},de={class:"text-right mt-2"},me={class:"mt-4 mb-2"},pe={class:"text-right mt-2"},ve=L({__name:"ConnectionConfig",setup(O){const u=D(),p=b(!1),f=b(!1);v.on("importConfirm",()=>{p.value=!0}).on("importWorkspaceConfirm",()=>{f.value=!0}).on("importResult",({success:n,message:s,cancel:m})=>{if(p.value=!1,f.value=!1,m)return;A({duration:n?1e3:2e3,message:s,type:n?"success":"error"})});const y=n=>{v.emit("editConfig",n)},r=n=>{v.emit("exportConfig",n)},d=(n={})=>{v.emit("importConfig",n)};return(n,s)=>{const m=P("vsc-button"),h=G,w=P("pay-badge");return g(),x(K,{class:"!mb-3"},{default:o(()=>[i("div",re,[i("div",ce,t(n.$t("console.configuration")),1),i("section",ue,[e(w,{left:0},{default:o(()=>[a(t(n.$t("connect.current"))+": ",1),e(m,{type:"secondary",icon:"codicon-edit",disabled:!V(u).isPay,size:"mini",onClick:s[0]||(s[0]=$=>y(!0))},null,8,["disabled"]),e(m,{icon:"codicon-arrow-down",disabled:!V(u).isPay,size:"mini",onClick:s[1]||(s[1]=$=>r(!0))},null,8,["disabled"]),e(h,{placement:"top",visible:f.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(m,{icon:"codicon-arrow-up",disabled:!V(u).isPay,size:"mini",onClick:s[5]||(s[5]=$=>d({workspace:!0}))},null,8,["disabled"])]),default:o(()=>[i("p",null,t(n.$t("console.mergeConfirm")),1),i("div",de,[e(m,{type:"secondary",size:"mini",onClick:s[2]||(s[2]=$=>f.value=!1)},{default:o(()=>[a(t(n.$t("common.cancel")),1)]),_:1}),e(m,{onClick:s[3]||(s[3]=$=>d({type:"merge",workspace:!0}))},{default:o(()=>[a(t(n.$t("console.merge")),1)]),_:1}),e(m,{onClick:s[4]||(s[4]=$=>d({type:"overwrite",workspace:!0}))},{default:o(()=>[a(t(n.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])]),_:1})]),i("section",me,[a(t(n.$t("connect.global"))+": ",1),e(m,{type:"secondary",icon:"codicon-edit",size:"mini",onClick:y},{default:o(()=>[a(t(n.$t("console.edit")),1)]),_:1}),e(m,{icon:"codicon-arrow-down",size:"mini",onClick:r},{default:o(()=>[a(t(n.$t("console.export")),1)]),_:1}),e(h,{placement:"top",visible:p.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(m,{icon:"codicon-arrow-up",size:"mini",onClick:s[9]||(s[9]=$=>d())},{default:o(()=>[a(t(n.$t("console.import")),1)]),_:1})]),default:o(()=>[i("p",null,t(n.$t("console.mergeConfirm")),1),i("div",pe,[e(m,{type:"secondary",onClick:s[6]||(s[6]=$=>p.value=!1)},{default:o(()=>[a(t(n.$t("common.cancel")),1)]),_:1}),e(m,{onClick:s[7]||(s[7]=$=>d({type:"merge"}))},{default:o(()=>[a(t(n.$t("console.merge")),1)]),_:1}),e(m,{onClick:s[8]||(s[8]=$=>d({type:"overwrite"}))},{default:o(()=>[a(t(n.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])])])]),_:1})}}}),fe={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},ge=i("i",{class:"el-icon-document"},null,-1),_e={class:"my-2"},ye={class:"mr-2"},Ce={style:{"margin-top":"5px","margin-bottom":"10px"}},$e={style:{"text-align":"right",margin:"0"}},be={style:{"margin-top":"5px","margin-bottom":"10px"}},ke={style:{"text-align":"right",margin:"0"}},we={style:{"margin-top":"5px","margin-bottom":"10px"}},he={style:{"text-align":"right",margin:"0"}},ze={style:{"margin-top":"20px"}},Se=L({__name:"CloudSync",setup(O){const u=D(),p=b(!1),f=b(!1),y=b(!1),r=b(!1),d=b(null),n=b(!1),s=b(!1),m=b(!1),h=b(!1);H(()=>{p.value=u.config.autoSync,v.on("downloadConfirm",()=>{m.value=!1,r.value=!0}).on("downloadResult",({success:l,message:c})=>{m.value=!1,A({duration:l?1e3:3e3,message:c,type:l?"success":"error"})}).on("uploadRes",({success:l,message:c})=>{n.value=!1,A({duration:l?1e3:3e3,message:c,type:l?"success":"error"})}).on("removeRes",({success:l,message:c})=>{s.value=!1,A({duration:l?1e3:3e3,message:c,type:l?"success":"error"})}).on("syncKey",l=>{(!d.value||h.value)&&(d.value=l,h.value=!1)})});const w=()=>{v.emit("updateOption",{name:"autoSync",value:p.value})},$=()=>{v.emit("open","https://github.com/cweijan/vscode-database-client/wiki/About-Cloud-Sync")},C=()=>{h.value=!0,v.emit("chooseSyncKey")},N=()=>{if(!u.isPay){I("Free account not support upload configuration!");return}f.value=!1,n.value=!0,v.emit("uploadConfig",d.value)},z=()=>{y.value=!1,s.value=!0,v.emit("removeConfig")},j=l=>{if(!u.isPay){I("Free account not support sync data!");return}r.value=!1,m.value=!0,v.emit("downloadConfig",{keyPath:d.value,type:l})},J=l=>{if(!u.user){I("Please log in to your account first."),l.stopPropagation();return}};return(l,c)=>{const _=P("vsc-button"),B=te,F=G,X=T;return g(),x(K,{class:"!mb-3"},{default:o(()=>[i("div",null,[i("div",fe,[a(t(l.$t("console.sync"))+" ",1),e(_,{class:"ml-2",size:"mini",onClick:$},{default:o(()=>[ge,a(" Wiki ")]),_:1})]),i("div",_e,[i("label",ye,t(l.$t("console.autoSync")),1),e(B,{modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=k=>p.value=k),onChange:w},null,8,["modelValue"])]),i("div",{onClickCapture:J},[e(F,{placement:"top",visible:y.value,trigger:"manual"},{reference:o(()=>[e(_,{type:"secondary",size:"mini",icon:"codicon-trash",loading:s.value,onClick:c[2]||(c[2]=k=>y.value=!0)},{default:o(()=>[a(t(l.$t("console.remove")),1)]),_:1},8,["loading"])]),default:o(()=>[i("p",Ce,t(l.$t("console.removeConfirm")),1),i("div",$e,[e(_,{type:"secondary",size:"mini",onClick:c[1]||(c[1]=k=>y.value=!1)},{default:o(()=>[a(t(l.$t("common.cancel")),1)]),_:1}),e(_,{size:"mini",onClick:z},{default:o(()=>[a(t(l.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(F,{placement:"top",visible:f.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(_,{icon:"codicon-cloud-upload",size:"mini",loading:n.value,onClick:c[4]||(c[4]=k=>f.value=!0)},{default:o(()=>[a(t(l.$t("console.upload")),1)]),_:1},8,["loading"])]),default:o(()=>[i("p",be,t(l.$t("console.uploadConfirm")),1),i("div",ke,[e(_,{type:"secondary",onClick:c[3]||(c[3]=k=>f.value=!1)},{default:o(()=>[a(t(l.$t("common.cancel")),1)]),_:1}),e(_,{onClick:N},{default:o(()=>[a(t(l.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(F,{placement:"top",visible:r.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(_,{icon:"codicon-cloud-download",size:"mini",loading:m.value,onClick:c[8]||(c[8]=k=>j())},{default:o(()=>[a(t(l.$t("console.download")),1)]),_:1},8,["loading"])]),default:o(()=>[i("p",we,t(l.$t("console.mergeConfirm")),1),i("div",he,[e(_,{type:"secondary",onClick:c[5]||(c[5]=k=>r.value=!1)},{default:o(()=>[a(t(l.$t("common.cancel")),1)]),_:1}),e(_,{onClick:c[6]||(c[6]=k=>j("merge"))},{default:o(()=>[a(t(l.$t("console.merge")),1)]),_:1}),e(_,{onClick:c[7]||(c[7]=k=>j("overwrite"))},{default:o(()=>[a(t(l.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"]),i("div",ze,[e(X,{modelValue:d.value,"onUpdate:modelValue":c[9]||(c[9]=k=>d.value=k),size:"small",class:"!w-56",placeholder:"Sync Encryption Key(Optional)"},null,8,["modelValue"]),e(_,{icon:"codicon-file",size:"mini",class:"!ml-1 relative",style:{top:"3px"},onClick:C})])],32)])]),_:1})}}}),Ve={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},Oe={key:0,class:"mt-3 mb-2"},xe={class:"mt-3 mb-2"},Ee={class:"mt-3 mb-1"},Ae=L({__name:"OtherOptions",setup(O){const u=b(!1),p=()=>{ee(`Width: ${window.innerWidth}, Height: ${window.innerHeight}`)},f=()=>{v.emit("clearCache")},y=()=>{v.emit("open","https://github.com/cweijan/vscode-database-client/issues")};return(r,d)=>{const n=P("vsc-button");return g(),x(K,null,{default:o(()=>[i("div",null,[i("div",Ve,t(r.$t("console.other")),1),u.value?(g(),S("div",Oe,[e(n,{icon:"codicon-gear",size:"mini",onClick:p},{default:o(()=>[a(" 获取页面宽高 ")]),_:1})])):Q("",!0),i("div",xe,[e(n,{icon:"codicon-chrome-close",size:"mini",onClick:d[0]||(d[0]=s=>{V(v).emit("closeAllConnections")})},{default:o(()=>[a(t(r.$t("toolbar.closeAllConnections")),1)]),_:1})]),i("div",Ee,[e(n,{icon:"codicon-github-inverted",size:"mini",onClick:y},{default:o(()=>[a(t(r.$t("toolbar.reportIssue")),1)]),_:1}),e(n,{icon:"codicon-clear-all",size:"mini",onClick:f},{default:o(()=>[a(t(r.$t("toolbar.clearCache")),1)]),_:1})])])]),_:1})}}}),Le=L({__name:"ConsoleSide",setup(O){return(u,p)=>(g(),S("div",null,[e(ve),e(Se),e(Ae)]))}}),Pe={editor:["enableSQLVariable","enableEditorCodeLens","enableFlexibleSQLParser","highlightSQLBlock","bindConnectionByActiveMark"],result:["openResultsAsVertically","splitEditorWhenQuery","reloadAfterDML","autoGetTableCount"],treeView:["showUser","saveConnectionExpandedState"],sql:["escapedAllObjectName","capitalizeKeywordsWhenFormatting","autoPagingSQL","queryWithSchema"]};function W(O,u){const p=Pe[O];return u.filter(f=>p.includes(f.name)).sort((f,y)=>p.indexOf(f.name)-p.indexOf(y.name))}const R={escapedAllObjectName:[{value:"auto",label:"Auto"},{value:"never",label:"Never"},{value:"always",label:"Always"}]},Be={class:"flex flex-wrap justify-center console-container"},We={class:"option-container"},Ke={class:"option-title"},Ne={class:"option-list"},je={key:0},Fe=L({__name:"console",setup(O){const u=b([]),p=oe(()=>[{title:E("console.editorOptions"),options:W("editor",u.value),tag:"dbclient-editor"},{title:E("console.sqlOptions"),options:W("sql",u.value),tag:"dbclient-sql-parser"},{title:E("console.treeOptions"),options:W("treeView",u.value)},{title:E("console.resultOptions"),options:W("result",u.value)}]);H(async()=>{v.emit("options").on("options",({options:r})=>{u.value=r}).on("configSuccess",r=>{A({message:r,type:"success"})}).on("resetSuccess",r=>{A({message:r,type:"success"}),v.emit("options")}).init()});const f=r=>{v.emit("resetOption",r)},y=r=>{let d=r.value;r.type=="boolean"&&(d=!r.value,r.value=d),v.emit("updateOption",{...r,value:d})};return(r,d)=>{const n=P("vsc-button"),s=ne,m=le,h=se;return g(),S("div",Be,[e(Le),i("div",We,[(g(!0),S(q,null,M(p.value,(w,$)=>(g(),x(K,{key:$,style:{"max-width":"350px","min-width":"300px"}},{default:o(()=>[i("div",Ke,t(w.title),1),e(n,{icon:"codicon-discard",size:"micro",title:V(E)("console.resetConfig"),onClick:C=>f(w.options)},null,8,["title","onClick"]),w.tag?(g(),x(n,{key:0,icon:"codicon-ellipsis",size:"micro",title:V(E)("console.resetConfig"),onClick:C=>V(v).emit("openMoreSettings",w.tag)},null,8,["title","onClick"])):Q("",!0),i("div",Ne,[(g(!0),S(q,null,M(w.options,(C,N)=>(g(),S("div",{key:N,class:"option-item"},[V(R)[C.name]?(g(),S("div",je,[a(t(C.description)+" ",1),e(m,{modelValue:C.value,"onUpdate:modelValue":z=>C.value=z,class:"w-28",size:"small",onChange:z=>y(C)},{default:o(()=>[(g(!0),S(q,null,M(V(R)[C.name],z=>(g(),x(s,{key:z.value,value:z.value,label:z.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):C.type=="boolean"?(g(),x(h,{key:1,"model-value":C.value,onChange:z=>y(C)},{default:o(()=>[a(t(C.description),1)]),_:2},1032,["model-value","onChange"])):Q("",!0)]))),128))])]),_:2},1024))),128))])])}}}),Ze=U(Fe,[["__scopeId","data-v-649bdea7"]]);export{Ze as default};
